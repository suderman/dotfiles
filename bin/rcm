#!/bin/bash

# 2016 Jon Suderman
# https://github.com/suderman/dotfiles

# Helper methods for prettier shell scripting - http://suderman.github.io/shelper
eval "$(cat ~/.local/share/shelper.sh || curl suderman.github.io/shelper/shelper.sh)"

# Ensure rcm exists
if has rcdn && has rcup; then

  # Reliably set HOSTNAME (OS X is troublesome here)
  HOSTNAME=$(if is osx; then scutil --get ComputerName; else hostname; fi)

  # Set TAG to osx or ubuntu
  TAG=$(if is osx; then echo osx; else echo ubuntu; fi)

  # Remove all dotfiles 
  rcdn -v

  # Only enable ~/.rcrc dotfile, dependent on HOSTNAME and TAG
  rcup -v -d ~/.dotfiles -B $HOSTNAME -t $TAG rcrc

  # With ~/.rcrc in place, enable the rest of the dotfiles
  rcup -v

else
  msg "rcm is not installed!"
fi
