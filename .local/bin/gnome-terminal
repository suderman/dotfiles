#!/bin/sh

# # Override system's gnome-terminal with script in user's .local/bin directory
# ln -sf /home/$USER/.local/bin/gnome-terminal /usr/local/bin/gnome-terminal
# chown -R $USER:$USER/usr/local/bin

# Terminal du jour
term=foot

# map function, replace using sed
args=$(for i in "$@"; do sed s/\-\-/\-e/g <<< "$i"; done)
args=$(for i in "$args"; do sed s/\-\x/\-e/g <<< "$i" ; done)
args=$(for i in "$args"; do sed s/\-\w/\-\-working\-directory/g <<< "$i" ; done)
args=$(for i in "$args"; do sed s/\-ewindow//g <<< "$i" ; done)
args=$(for i in "$args"; do sed s/\-\-window//g <<< "$i" ; done)

log=$(mktemp)
printf "command that was run: $term $args\n\n" > $log
[ $EDITOR ] || EDITOR=vi
(($term $args >> $log || $term -e $EDITOR $log) && rm -f $log) &
